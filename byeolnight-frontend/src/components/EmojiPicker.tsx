import { useState } from 'react';

interface Props {
  onEmojiSelect: (emoji: string) => void;
  className?: string;
}

const EMOJI_CATEGORIES: Record<string, string[]> = {
  'ìš°ì£¼': ['ğŸŒŒ', 'ğŸŒŸ', 'â­', 'ğŸŒ ', 'ğŸš€', 'ğŸ›¸', 'ğŸŒ™', 'ğŸŒ•', 'ğŸŒ–', 'ğŸŒ—', 'ğŸŒ˜', 'ğŸŒ‘', 'ğŸŒ’', 'ğŸŒ“', 'ğŸŒ”', 'ğŸŒ', 'ğŸŒ', 'ğŸŒ', 'ğŸª', 'ğŸ›°', 'ğŸ’«', 'âœ¨', 'ğŸ†', 'ğŸ‡', 'ğŸŒœ', 'ğŸŒ›', 'ğŸŒ', 'ğŸŒ', 'â˜€ï¸', 'â›…', 'â˜ï¸', 'âš¡', 'ğŸŒˆ', 'â˜„ï¸'],
  'ê°ì •': ['ğŸ˜Š', 'ğŸ˜‚', 'ğŸ¥°', 'ğŸ˜', 'ğŸ¤”', 'ğŸ˜®', 'ğŸ˜¢', 'ğŸ˜­', 'ğŸ˜¡', 'ğŸ¤¯', 'ğŸ˜', 'ğŸ¥³', 'ğŸ˜´', 'ğŸ¤—', 'ğŸ‘', 'ğŸ˜„', 'ğŸ˜', 'ğŸ˜†', 'ğŸ˜…', 'ğŸ¤£', 'ğŸ˜‰', 'ğŸ˜Œ', 'ğŸ˜‹', 'ğŸ˜›', 'ğŸ˜œ', 'ğŸ˜', 'ğŸ¤‘', 'ğŸ¤“', 'ğŸ˜’', 'ğŸ˜', 'ğŸ˜‘', 'ğŸ˜¶', 'ğŸ™„', 'ğŸ˜¯', 'ğŸ˜¦', 'ğŸ˜§', 'ğŸ˜¨', 'ğŸ˜°', 'ğŸ˜¥', 'ğŸ˜“', 'ğŸ˜”', 'ğŸ˜•', 'ğŸ˜–', 'ğŸ˜£', 'ğŸ˜', 'ğŸ˜Ÿ', 'ğŸ˜¤', 'ğŸ˜ ', 'ğŸ˜±', 'ğŸ˜²', 'ğŸ˜³', 'ğŸ¥µ', 'ğŸ¥¶', 'ğŸ˜µ', 'ğŸ˜·', 'ğŸ¤’', 'ğŸ¤•', 'ğŸ¤¢', 'ğŸ¤®', 'ğŸ¤¤', 'ğŸ˜‡', 'ğŸ¥°', 'ğŸ˜', 'ğŸ¤©', 'ğŸ˜˜', 'ğŸ˜—', 'â˜ºï¸', 'ğŸ˜š', 'ğŸ˜™', 'ğŸ¥²', 'ğŸ™ƒ', 'ğŸ˜ˆ', 'ğŸ¤¡', 'ğŸ¤ ', 'ğŸ¥³', 'ğŸ¥´', 'ğŸ¥±', 'ğŸ¤­', 'ğŸ¤«', 'ğŸ¤ª', 'ğŸ¤´', 'ğŸ¥¸', 'ğŸ¤', 'ğŸ¤¨', 'ğŸ¤§', 'ğŸ¤¥', 'ğŸ¤¬', 'ğŸ˜ª', 'ğŸ˜«', 'ğŸ˜©', 'ğŸ˜µâ€ğŸ’«', 'ğŸ¥º', 'ğŸ˜', 'ğŸ˜¶â€ğŸŒ«ï¸'],
  'ë™ë¬¼': ['ğŸ¶', 'ğŸ±', 'ğŸ­', 'ğŸ¹', 'ğŸ°', 'ğŸ¦Š', 'ğŸ»', 'ğŸ¼', 'ğŸ»â€â„ï¸', 'ğŸ¨', 'ğŸ¯', 'ğŸ¦', 'ğŸ®', 'ğŸ·', 'ğŸ¸', 'ğŸµ', 'ğŸ™ˆ', 'ğŸ™‰', 'ğŸ™Š', 'ğŸ’', 'ğŸ”', 'ğŸ§', 'ğŸ¦', 'ğŸ¤', 'ğŸ£', 'ğŸ¥', 'ğŸ¦†', 'ğŸ¦…', 'ğŸ¦‰', 'ğŸ¦‡', 'ğŸº', 'ğŸ—', 'ğŸ´', 'ğŸ¦„', 'ğŸ', 'ğŸ›', 'ğŸ¦‹', 'ğŸŒ', 'ğŸ', 'ğŸœ', 'ğŸ¦—', 'ğŸ', 'ğŸ¦•', 'ğŸ¢', 'ğŸ¦', 'ğŸ¦–', 'ğŸ¦•', 'ğŸ™', 'ğŸ ', 'ğŸŸ', 'ğŸ¡', 'ğŸ¦ˆ', 'ğŸ³', 'ğŸ‹', 'ğŸ¬', 'ğŸ¦­', 'ğŸˆ', 'ğŸˆâ€â¬›', 'ğŸ¦', 'ğŸ…', 'ğŸ†', 'ğŸ´', 'ğŸ¦“', 'ğŸ¦Œ', 'ğŸ¦', 'ğŸ˜', 'ğŸ¦', 'ğŸ¦›', 'ğŸª', 'ğŸ«', 'ğŸ¦’', 'ğŸ¦˜', 'ğŸ¦™', 'ğŸƒ', 'ğŸ‚', 'ğŸ„', 'ğŸ', 'ğŸ–', 'ğŸ', 'ğŸ‘', 'ğŸ•', 'ğŸ•â€ğŸ¦º', 'ğŸ©', 'ğŸˆ', 'ğŸ“', 'ğŸ¦ƒ', 'ğŸ•Š', 'ğŸ‡', 'ğŸ', 'ğŸ€', 'ğŸ¿ï¸', 'ğŸ¦«', 'ğŸ¾'],
  'ìŒì‹': ['ğŸ', 'ğŸŠ', 'ğŸ‹', 'ğŸŒ', 'ğŸ‰', 'ğŸ‡', 'ğŸ“', 'ğŸ«', 'ğŸˆ', 'ğŸ’', 'ğŸ¥', 'ğŸ‘', 'ğŸ¥­', 'ğŸ', 'ğŸ¥¥', 'ğŸ…', 'ğŸ†', 'ğŸ¥’', 'ğŸ¥•', 'ğŸŒ½', 'ğŸŒ¶ï¸', 'ğŸ«‘', 'ğŸ¥”', 'ğŸ ', 'ğŸŒ°', 'ğŸ¥¬', 'ğŸ¥¦', 'ğŸ§„', 'ğŸ§…', 'ğŸ„', 'ğŸŒµ', 'ğŸŒ´', 'ğŸŒ²', 'ğŸŒ³', 'ğŸŒ¿', 'â˜˜ï¸', 'ğŸ€', 'ğŸ', 'ğŸ‚', 'ğŸƒ', 'ğŸŒ¾', 'ğŸŒº', 'ğŸŒ»', 'ğŸŒ¹', 'ğŸ¥€', 'ğŸŒ·', 'ğŸŒ¼', 'ğŸŒ¸', 'ğŸŒ¿', 'ğŸ', 'ğŸ¥–', 'ğŸ¥¨', 'ğŸ¥¯', 'ğŸ§€', 'ğŸ–', 'ğŸ—', 'ğŸ¥©', 'ğŸŸ', 'ğŸ”', 'ğŸ', 'ğŸ•', 'ğŸŒ­', 'ğŸ¥ª', 'ğŸŒ®', 'ğŸŒ¯', 'ğŸ¥™', 'ğŸ¥˜', 'ğŸ¥š', 'ğŸ³', 'ğŸ¥', 'ğŸ§ˆ', 'ğŸ²', 'ğŸœ', 'ğŸ›', 'ğŸ£', 'ğŸ±', 'ğŸš', 'ğŸ™', 'ğŸ˜', 'ğŸ¥', 'ğŸ¥®', 'ğŸ¢', 'ğŸ¡', 'ğŸ§', 'ğŸ¨', 'ğŸ¦', 'ğŸ¥§', 'ğŸ°', 'ğŸ‚', 'ğŸ§', 'ğŸ¯', 'ğŸ®', 'ğŸ­', 'ğŸ¬', 'ğŸ«', 'ğŸ¿', 'ğŸ©', 'ğŸª', 'â˜•', 'ğŸµ', 'ğŸ«–', 'ğŸ¶', 'ğŸ¼', 'ğŸº', 'ğŸ»', 'ğŸ¥‚', 'ğŸ·', 'ğŸ¥ƒ', 'ğŸ¸', 'ğŸ¹', 'ğŸ¾', 'ğŸ¥¤', 'ğŸ¥›', 'ğŸ¥œ'],
  'í™œë™': ['âš½', 'ğŸ€', 'ğŸˆ', 'âš¾', 'ğŸ¥', 'ğŸ“', 'ğŸ¸', 'ğŸ’', 'ğŸ‘', 'ğŸ', 'ğŸ¥', 'ğŸ', 'â›³', 'ğŸ¹', 'ğŸ£', 'ğŸ¥Š', 'ğŸ¥‹', 'ğŸ¥…', 'â›·ï¸', 'ğŸ‚', 'ğŸ„', 'ğŸ„â€â™‚ï¸', 'ğŸ„â€â™€ï¸', 'ğŸš£', 'ğŸš£â€â™‚ï¸', 'ğŸš£â€â™€ï¸', 'ğŸŠ', 'ğŸŠâ€â™‚ï¸', 'ğŸŠâ€â™€ï¸', 'â›¹ï¸', 'â›¹ï¸â€â™‚ï¸', 'â›¹ï¸â€â™€ï¸', 'ğŸ‹ï¸', 'ğŸ‹ï¸â€â™‚ï¸', 'ğŸ‹ï¸â€â™€ï¸', 'ğŸš´', 'ğŸš´â€â™‚ï¸', 'ğŸš´â€â™€ï¸', 'ğŸšµ', 'ğŸšµâ€â™‚ï¸', 'ğŸšµâ€â™€ï¸', 'ğŸï¸', 'ğŸï¸', 'ğŸ¤¸', 'ğŸ¤¸â€â™‚ï¸', 'ğŸ¤¸â€â™€ï¸', 'ğŸ¤¼', 'ğŸ¤¼â€â™‚ï¸', 'ğŸ¤¼â€â™€ï¸', 'ğŸ¤½', 'ğŸ¤½â€â™‚ï¸', 'ğŸ¤½â€â™€ï¸', 'ğŸ¤¾', 'ğŸ¤¾â€â™‚ï¸', 'ğŸ¤¾â€â™€ï¸', 'ğŸ¤¹', 'ğŸ¤¹â€â™‚ï¸', 'ğŸ¤¹â€â™€ï¸'],
  'ê¸°íƒ€': ['â¤ï¸', 'ğŸ’œ', 'ğŸ’™', 'ğŸ’š', 'ğŸ’›', 'ğŸ§¡', 'ğŸ”¥', 'âœ¨', 'ğŸ’«', 'âš¡', 'ğŸ‰', 'ğŸŠ', 'ğŸ‘', 'ğŸ™Œ', 'ğŸ’ª', 'ğŸ‘', 'ğŸ‘', 'ğŸ‘Š', 'âœŠ', 'ğŸ¤', 'ğŸ™', 'âœï¸', 'ğŸ’¬', 'ğŸ‘ï¸â€ğŸ—¨ï¸', 'ğŸ—¨ï¸', 'ğŸ’­', 'ğŸ’¯', 'ğŸ’¢', 'ğŸ’¥', 'ğŸ’¦', 'ğŸ’¨', 'ğŸ•³ï¸', 'ğŸ’µ', 'ğŸ’´', 'ğŸ’¶', 'ğŸ’·', 'ğŸ’°', 'ğŸ’³', 'ğŸ’', 'âš–ï¸', 'ğŸ§¨', 'ğŸ”§', 'ğŸ”¨', 'âš’ï¸', 'ğŸ› ï¸', 'âš”ï¸', 'ğŸ”«', 'ğŸ¹', 'ğŸ›¡ï¸', 'ğŸ”ª', 'âš™ï¸', 'ğŸ§¿', 'â›‘ï¸', 'ğŸš¨', 'ğŸš©', 'ğŸ', 'ğŸ³ï¸', 'ğŸ´', 'ğŸ³ï¸â€ğŸŒˆ', 'ğŸ³ï¸â€âš§ï¸', 'ğŸ´â€â˜ ï¸']
};

export default function EmojiPicker({ onEmojiSelect, className = '' }: Props) {
  const [isOpen, setIsOpen] = useState(false);
  const [activeCategory, setActiveCategory] = useState('ìš°ì£¼');

  const handleEmojiClick = (emoji: string) => {
    onEmojiSelect(emoji);
    // ì°½ì„ ë‹«ì§€ ì•Šê³  ìœ ì§€
  };

  return (
    <div className={`relative ${className}`}>
      <button
        type="button"
        onClick={() => setIsOpen(!isOpen)}
        className="p-2 text-yellow-400 hover:text-yellow-300 hover:bg-gray-700/50 rounded-md transition-colors"
        title="ì´ëª¨í‹°ì½˜ ì¶”ê°€"
      >
        ğŸ˜Š
      </button>

      {isOpen && (
        <div className="absolute bottom-full mb-2 left-0 sm:right-0 sm:left-auto bg-gray-800 border border-gray-600 rounded-lg shadow-xl z-[9999] w-80 max-w-[90vw]">
          {/* ì¹´í…Œê³ ë¦¬ íƒ­ */}
          <div className="flex border-b border-gray-600">
            {Object.keys(EMOJI_CATEGORIES).map((category) => (
              <button
                key={category}
                type="button"
                onClick={() => setActiveCategory(category)}
                className={`flex-1 px-3 py-2 text-xs font-medium transition-colors ${
                  activeCategory === category
                    ? 'bg-purple-600 text-white'
                    : 'text-gray-300 hover:bg-gray-700'
                }`}
              >
                {category}
              </button>
            ))}
          </div>

          {/* ì´ëª¨í‹°ì½˜ ê·¸ë¦¬ë“œ */}
          <div className="p-3 max-h-48 overflow-y-auto">
            <div className="grid grid-cols-5 gap-2">
              {(EMOJI_CATEGORIES[activeCategory] || []).map((emoji, index) => (
                <button
                  key={index}
                  type="button"
                  onClick={() => handleEmojiClick(emoji)}
                  className="p-2 text-lg hover:bg-gray-700 rounded transition-colors"
                  title={emoji}
                >
                  {emoji}
                </button>
              ))}
            </div>
          </div>
        </div>
      )}

      {/* í´ë¦­ ì™¸ë¶€ ì˜ì—­ ê°ì§€ */}
      {isOpen && (
        <div
          className="fixed inset-0 z-[9998]"
          onClick={() => setIsOpen(false)}
        />
      )}
    </div>
  );
}