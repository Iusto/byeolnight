import { useState } from 'react';

interface Props {
  onEmojiSelect: (emoji: string) => void;
  className?: string;
}

const EMOJI_CATEGORIES: Record<string, string[]> = {
  'ìš°ì£¼': ['ðŸŒŒ', 'ðŸŒŸ', 'â­', 'ðŸŒ ', 'ðŸš€', 'ðŸ›¸', 'ðŸŒ™', 'ðŸŒ•', 'ðŸŒ–', 'ðŸŒ—', 'ðŸŒ˜', 'ðŸŒ‘', 'ðŸŒ’', 'ðŸŒ“', 'ðŸŒ”', 'ðŸŒ', 'ðŸŒŽ', 'ðŸŒ', 'ðŸª', 'ðŸ›°', 'ðŸ’«', 'âœ¨', 'ðŸŽ†', 'ðŸŽ‡', 'ðŸŒœ', 'ðŸŒ›', 'ðŸŒ', 'ðŸŒž', 'â˜€ï¸', 'â›…', 'â˜ï¸', 'âš¡', 'ðŸŒˆ', 'â˜„ï¸'],
  'ê°ì •': ['ðŸ˜Š', 'ðŸ˜‚', 'ðŸ¥°', 'ðŸ˜', 'ðŸ¤”', 'ðŸ˜®', 'ðŸ˜¢', 'ðŸ˜­', 'ðŸ˜¡', 'ðŸ¤¯', 'ðŸ˜Ž', 'ðŸ¥³', 'ðŸ˜´', 'ðŸ¤—', 'ðŸ‘', 'ðŸ˜„', 'ðŸ˜', 'ðŸ˜†', 'ðŸ˜…', 'ðŸ¤£', 'ðŸ˜‰', 'ðŸ˜Œ', 'ðŸ˜‹', 'ðŸ˜›', 'ðŸ˜œ', 'ðŸ˜', 'ðŸ¤‘', 'ðŸ¤“', 'ðŸ˜’', 'ðŸ˜', 'ðŸ˜‘', 'ðŸ˜¶', 'ðŸ™„', 'ðŸ˜¯', 'ðŸ˜¦', 'ðŸ˜§', 'ðŸ˜¨', 'ðŸ˜°', 'ðŸ˜¥', 'ðŸ˜“', 'ðŸ˜”', 'ðŸ˜•', 'ðŸ˜–', 'ðŸ˜£', 'ðŸ˜ž', 'ðŸ˜Ÿ', 'ðŸ˜¤', 'ðŸ˜ ', 'ðŸ˜±', 'ðŸ˜²', 'ðŸ˜³', 'ðŸ¥µ', 'ðŸ¥¶', 'ðŸ˜µ', 'ðŸ˜·', 'ðŸ¤’', 'ðŸ¤•', 'ðŸ¤¢', 'ðŸ¤®', 'ðŸ¤¤', 'ðŸ˜‡', 'ðŸ¥°', 'ðŸ˜', 'ðŸ¤©', 'ðŸ˜˜', 'ðŸ˜—', 'â˜ºï¸', 'ðŸ˜š', 'ðŸ˜™', 'ðŸ¥²', 'ðŸ™ƒ', 'ðŸ˜ˆ', 'ðŸ¤¡', 'ðŸ¤ ', 'ðŸ¥³', 'ðŸ¥´', 'ðŸ¥±', 'ðŸ¤­', 'ðŸ¤«', 'ðŸ¤ª', 'ðŸ¤´', 'ðŸ¥¸', 'ðŸ¤', 'ðŸ¤¨', 'ðŸ¤§', 'ðŸ¤¥', 'ðŸ¤¬', 'ðŸ˜ª', 'ðŸ˜«', 'ðŸ˜©', 'ðŸ˜µðŸ’«', 'ðŸ¥º', 'ðŸ˜', 'ðŸ˜¶ðŸŒ«ï¸'],
  'ë™ë¬¼': ['ðŸ¶', 'ðŸ±', 'ðŸ­', 'ðŸ¹', 'ðŸ°', 'ðŸ¦Š', 'ðŸ»', 'ðŸ¼', 'ðŸ»â„ï¸', 'ðŸ¨', 'ðŸ¯', 'ðŸ¦', 'ðŸ®', 'ðŸ·', 'ðŸ¸', 'ðŸµ', 'ðŸ™ˆ', 'ðŸ™‰', 'ðŸ™Š', 'ðŸ’', 'ðŸ”', 'ðŸ§', 'ðŸ¦', 'ðŸ¤', 'ðŸ£', 'ðŸ¥', 'ðŸ¦†', 'ðŸ¦…', 'ðŸ¦‰', 'ðŸ¦‡', 'ðŸº', 'ðŸ—', 'ðŸ´', 'ðŸ¦„', 'ðŸ', 'ðŸ›', 'ðŸ¦‹', 'ðŸŒ', 'ðŸž', 'ðŸœ', 'ðŸ¦—', 'ðŸ', 'ðŸ¦•', 'ðŸ¢', 'ðŸ¦Ž', 'ðŸ¦–', 'ðŸ¦•', 'ðŸ™', 'ðŸ ', 'ðŸŸ', 'ðŸ¡', 'ðŸ¦ˆ', 'ðŸ³', 'ðŸ‹', 'ðŸ¬', 'ðŸ¦­', 'ðŸˆ', 'ðŸˆâ¬›', 'ðŸ¦', 'ðŸ…', 'ðŸ†', 'ðŸ´', 'ðŸ¦“', 'ðŸ¦Œ', 'ðŸ¦', 'ðŸ˜', 'ðŸ¦', 'ðŸ¦›', 'ðŸª', 'ðŸ«', 'ðŸ¦’', 'ðŸ¦˜', 'ðŸ¦™', 'ðŸƒ', 'ðŸ‚', 'ðŸ„', 'ðŸŽ', 'ðŸ–', 'ðŸ', 'ðŸ‘', 'ðŸ•', 'ðŸ•ðŸ¦º', 'ðŸ©', 'ðŸˆ', 'ðŸ“', 'ðŸ¦ƒ', 'ðŸ•Š', 'ðŸ‡', 'ðŸ', 'ðŸ€', 'ðŸ¿ï¸', 'ðŸ¦«', 'ðŸ¾'],
  'ìŒì‹': ['ðŸŽ', 'ðŸŠ', 'ðŸ‹', 'ðŸŒ', 'ðŸ‰', 'ðŸ‡', 'ðŸ“', 'ðŸ«', 'ðŸˆ', 'ðŸ’', 'ðŸ¥', 'ðŸ‘', 'ðŸ¥­', 'ðŸ', 'ðŸ¥¥', 'ðŸ…', 'ðŸ†', 'ðŸ¥’', 'ðŸ¥•', 'ðŸŒ½', 'ðŸŒ¶ï¸', 'ðŸ«‘', 'ðŸ¥”', 'ðŸ ', 'ðŸŒ°', 'ðŸ¥¬', 'ðŸ¥¦', 'ðŸ§„', 'ðŸ§…', 'ðŸ„', 'ðŸŒµ', 'ðŸŒ´', 'ðŸŒ²', 'ðŸŒ³', 'ðŸŒ¿', 'â˜˜ï¸', 'ðŸ€', 'ðŸ', 'ðŸ‚', 'ðŸƒ', 'ðŸŒ¾', 'ðŸŒº', 'ðŸŒ»', 'ðŸŒ¹', 'ðŸ¥€', 'ðŸŒ·', 'ðŸŒ¼', 'ðŸŒ¸', 'ðŸŒ¿', 'ðŸž', 'ðŸ¥–', 'ðŸ¥¨', 'ðŸ¥¯', 'ðŸ§€', 'ðŸ–', 'ðŸ—', 'ðŸ¥©', 'ðŸŸ', 'ðŸ”', 'ðŸ', 'ðŸ•', 'ðŸŒ­', 'ðŸ¥ª', 'ðŸŒ®', 'ðŸŒ¯', 'ðŸ¥™', 'ðŸ¥˜', 'ðŸ¥š', 'ðŸ³', 'ðŸ¥ž', 'ðŸ§ˆ', 'ðŸ²', 'ðŸœ', 'ðŸ›', 'ðŸ£', 'ðŸ±', 'ðŸš', 'ðŸ™', 'ðŸ˜', 'ðŸ¥', 'ðŸ¥®', 'ðŸ¢', 'ðŸ¡', 'ðŸ§', 'ðŸ¨', 'ðŸ¦', 'ðŸ¥§', 'ðŸ°', 'ðŸŽ‚', 'ðŸ§', 'ðŸ¯', 'ðŸ®', 'ðŸ­', 'ðŸ¬', 'ðŸ«', 'ðŸ¿', 'ðŸ©', 'ðŸª', 'â˜•', 'ðŸµ', 'ðŸ«–', 'ðŸ¶', 'ðŸ¼', 'ðŸº', 'ðŸ»', 'ðŸ¥‚', 'ðŸ·', 'ðŸ¥ƒ', 'ðŸ¸', 'ðŸ¹', 'ðŸ¾', 'ðŸ¥¤', 'ðŸ¥›', 'ðŸ¥œ'],
  'í™œë™': ['âš½', 'ðŸ€', 'ðŸˆ', 'âš¾', 'ðŸ¥Ž', 'ðŸ“', 'ðŸ¸', 'ðŸ’', 'ðŸ‘', 'ðŸ', 'ðŸ¥', 'ðŸ', 'â›³', 'ðŸ¹', 'ðŸŽ£', 'ðŸ¥Š', 'ðŸ¥‹', 'ðŸ¥…', 'â›·ï¸', 'ðŸ‚', 'ðŸ„', 'ðŸ„â™‚ï¸', 'ðŸ„â™€ï¸', 'ðŸš£', 'ðŸš£â™‚ï¸', 'ðŸš£â™€ï¸', 'ðŸŠ', 'ðŸŠâ™‚ï¸', 'ðŸŠâ™€ï¸', 'â›¹ï¸', 'â›¹ï¸â™‚ï¸', 'â›¹ï¸â™€ï¸', 'ðŸ‹ï¸', 'ðŸ‹ï¸â™‚ï¸', 'ðŸ‹ï¸â™€ï¸', 'ðŸš´', 'ðŸš´â™‚ï¸', 'ðŸš´â™€ï¸', 'ðŸšµ', 'ðŸšµâ™‚ï¸', 'ðŸšµâ™€ï¸', 'ðŸŽï¸', 'ðŸï¸', 'ðŸ¤¸', 'ðŸ¤¸â™‚ï¸', 'ðŸ¤¸â™€ï¸', 'ðŸ¤¼', 'ðŸ¤¼â™‚ï¸', 'ðŸ¤¼â™€ï¸', 'ðŸ¤½', 'ðŸ¤½â™‚ï¸', 'ðŸ¤½â™€ï¸', 'ðŸ¤¾', 'ðŸ¤¾â™‚ï¸', 'ðŸ¤¾â™€ï¸', 'ðŸ¤¹', 'ðŸ¤¹â™‚ï¸', 'ðŸ¤¹â™€ï¸'],
  'ê¸°íƒ€': ['â¤ï¸', 'ðŸ’œ', 'ðŸ’™', 'ðŸ’š', 'ðŸ’›', 'ðŸ§¡', 'ðŸ”¥', 'âœ¨', 'ðŸ’«', 'âš¡', 'ðŸŽ‰', 'ðŸŽŠ', 'ðŸ‘', 'ðŸ™Œ', 'ðŸ’ª', 'ðŸ‘', 'ðŸ‘Ž', 'ðŸ‘Š', 'âœŠ', 'ðŸ¤', 'ðŸ™', 'âœï¸', 'ðŸ’¬', 'ðŸ‘ï¸ðŸ—¨ï¸', 'ðŸ—¨ï¸', 'ðŸ’­', 'ðŸ’¯', 'ðŸ’¢', 'ðŸ’¥', 'ðŸ’¦', 'ðŸ’¨', 'ðŸ•³ï¸', 'ðŸ’µ', 'ðŸ’´', 'ðŸ’¶', 'ðŸ’·', 'ðŸ’°', 'ðŸ’³', 'ðŸ’Ž', 'âš–ï¸', 'ðŸ§¨', 'ðŸ”§', 'ðŸ”¨', 'âš’ï¸', 'ðŸ› ï¸', 'âš”ï¸', 'ðŸ”«', 'ðŸ¹', 'ðŸ›¡ï¸', 'ðŸ”ª', 'âš™ï¸', 'ðŸ§¿', 'â›‘ï¸', 'ðŸš¨', 'ðŸš©', 'ðŸ', 'ðŸ³ï¸', 'ðŸ´', 'ðŸ³ï¸ðŸŒˆ', 'ðŸ³ï¸âš§ï¸', 'ðŸ´â˜ ï¸']
};

export default function EmojiPicker({ onEmojiSelect, className = '' }: Props) {
  const [isOpen, setIsOpen] = useState(false);
  const [activeCategory, setActiveCategory] = useState('ìš°ì£¼');
  
  const isChat = className?.includes('border-l-0');

  const handleEmojiClick = (emoji: string) => {
    onEmojiSelect(emoji);
  };

  const renderModal = () => (
    <div className={`absolute z-[99999] w-72 max-w-[calc(100vw-2rem)] bg-gray-800 border border-gray-600 rounded-lg shadow-xl ${
      isChat 
        ? 'top-full mt-2 right-0 transform -translate-x-full sm:left-0 sm:right-auto sm:transform-none'
        : 'top-full mt-2 left-0'
    }`}>
      <div className="flex border-b border-gray-600">
        {Object.keys(EMOJI_CATEGORIES).map((category) => (
          <button
            key={category}
            type="button"
            onClick={() => setActiveCategory(category)}
            className={`flex-1 px-3 py-2 text-xs font-medium transition-colors ${
              activeCategory === category
                ? 'bg-purple-600 text-white'
                : 'text-gray-300 hover:bg-gray-700'
            }`}
          >
            {category}
          </button>
        ))}
      </div>
      <div className="p-3 max-h-48 overflow-y-auto">
        <div className="grid grid-cols-5 gap-2">
          {(EMOJI_CATEGORIES[activeCategory] || []).map((emoji, index) => (
            <button
              key={index}
              type="button"
              onClick={() => handleEmojiClick(emoji)}
              className="p-2 text-lg hover:bg-gray-700 rounded transition-colors"
              title={emoji}
            >
              {emoji}
            </button>
          ))}
        </div>
      </div>
    </div>
  );

  return (
    <div className={`relative ${className}`}>
      <button
        type="button"
        onClick={() => setIsOpen(!isOpen)}
        className="p-2 text-yellow-400 hover:text-yellow-300 hover:bg-gray-700/50 rounded-md transition-colors"
        title="ì´ëª¨í‹°ì½˜ ì¶”ê°€"
      >
        ðŸ˜Š
      </button>

      {isOpen && renderModal()}

      {isOpen && (
        <div
          className="fixed inset-0 z-[99998]"
          onClick={() => setIsOpen(false)}
        />
      )}
    </div>
  );
}