name: PR ê²€ì¦

on:
  pull_request:
    branches: [ main, develop ]
    types: [opened, synchronize, reopened]

jobs:
  pr-validation:
    name: PR ìœ íš¨ì„± ê²€ì‚¬
    runs-on: ubuntu-latest
    
    steps:
    - name: ì½”ë“œ ì²´í¬ì•„ì›ƒ
      uses: actions/checkout@v4
      with:
        fetch-depth: 0  # ì „ì²´ ížˆìŠ¤í† ë¦¬ ê°€ì ¸ì˜¤ê¸°

    - name: ë³€ê²½ëœ íŒŒì¼ ë¶„ì„
      id: changed-files
      uses: tj-actions/changed-files@v42
      with:
        files_yaml: |
          backend:
            - 'src/**'
            - 'build.gradle'
            - 'Dockerfile'
          frontend:
            - 'byeolnight-frontend/**'
          docs:
            - 'docs/**'
            - '*.md'
          config:
            - 'docker-compose*.yml'
            - '.github/**'

    - name: ë³€ê²½ ì‚¬í•­ ìš”ì•½
      run: |
        echo "## ðŸ“Š ë³€ê²½ ì‚¬í•­ ë¶„ì„" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        
        if [[ "${{ steps.changed-files.outputs.backend_any_changed }}" == "true" ]]; then
          echo "ðŸ”§ **ë°±ì—”ë“œ ë³€ê²½**: ${{ steps.changed-files.outputs.backend_all_changed_files }}" >> $GITHUB_STEP_SUMMARY
        fi
        
        if [[ "${{ steps.changed-files.outputs.frontend_any_changed }}" == "true" ]]; then
          echo "ðŸŽ¨ **í”„ë¡ íŠ¸ì—”ë“œ ë³€ê²½**: ${{ steps.changed-files.outputs.frontend_all_changed_files }}" >> $GITHUB_STEP_SUMMARY
        fi
        
        if [[ "${{ steps.changed-files.outputs.docs_any_changed }}" == "true" ]]; then
          echo "ðŸ“š **ë¬¸ì„œ ë³€ê²½**: ${{ steps.changed-files.outputs.docs_all_changed_files }}" >> $GITHUB_STEP_SUMMARY
        fi

